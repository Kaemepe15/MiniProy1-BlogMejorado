{% extends 'base.html' %}

{% block content %}
  <div class="animate-fade-in">
    <h1 class="text-3xl text-bright-blue mb-8 text-center shadow-pixel">Krash.px Blogs</h1>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      {% for blog in object_list %}
        <div class="bg-dark-blue bg-opacity-80 p-6 rounded-none border-4 border-deep-purple shadow-pixel hover:shadow-none hover:-translate-y-1 hover:-translate-x-1 transition-all duration-300">
          <h2 class="text-xl text-bright-blue mb-4">
            <a href="{% url 'blogapp:blog_detail' blog.pk %}" class="hover:text-neon-pink">{{ blog.title }}</a>
          </h2>
          {% if blog.featured_image %}
            <img src="{{ blog.featured_image.url }}" alt="{{ blog.title }}" class="w-full h-48 object-cover rounded-none border-2 border-deep-purple mb-4 shadow-pixel">
          {% endif %}
          <p class="text-sm text-light-text mb-2">
            {% if blog.reviews.exists %}
              Average Rating: {{ blog.average_rating }}/5 ‚≠ê ({{ blog.reviews.count }} reviews)
            {% else %}
              No reviews yet.
            {% endif %}
          </p>
          <p class="text-light-text mb-4 line-clamp-3">{{ blog.content|safe }}</p>
          <p class="text-sm text-light-text">by {{ blog.author.username|default:"Unknown" }} - {{ blog.created_at|date:"M d, Y" }}</p>
          <a href="{% url 'blogapp:blog_detail' blog.pk %}" class="inline-block bg-dark-teal text-light-text font-medium py-2 px-4 mt-4 rounded-none transition-all duration-300 shadow-pixel hover:bg-neon-pink hover:shadow-none hover:-translate-y-1 hover:-translate-x-1">
            Read More
          </a>
        </div>
      {% empty %}
        <p class="text-light-text text-center">No blogs yet. Be the first to write one!</p>
      {% endfor %}
    </div>
  </div>
{% endblock %}
