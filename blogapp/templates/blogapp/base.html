{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Krash.px - Gaming Blog</title>
  {{ form.media }}
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          fontFamily: {
            pixel: ['"Press Start 2P"', 'sans-serif']
          },
          colors: {
            'deep-purple': '#270140',
            'dark-blue': '#050E26',
            'bright-blue': '#0060C1',
            'dark-teal': '#012A60',
            'neon-pink': '#E922EF',
            'light-text': '#FFFFFF',
            'dark-text': '#270140',
            'dark-purple-nav': '#151026',
            'light-nav': '#E0E0E0',
            'light-bg': '#F5F5F5',
            'light-text-dark': '#333333',
            'light-blue': '#1E90FF',
            'light-border': '#A0A0A0'
          },
          boxShadow: {
            'pixel': '4px 4px 0 0 rgba(0, 0, 0, 0.5)',
            'pixel-dark': '4px 4px 0 0 rgba(255, 255, 255, 0.2)',
            'pixel-light': '4px 4px 0 0 rgba(0, 0, 0, 0.3)'
          }
        }
      }
    };
  </script>
  <style>
    /* Estilo del editor CKEditor */
    .cke_chrome {
      border: 3px solid #012A60;
      border-radius: 0;
      box-shadow: 4px 4px 0 rgba(0, 0, 0, 0.5);
    }
    .dark .cke_chrome {
      border-color: #0060C1;
      box-shadow: 4px 4px 0 rgba(255, 255, 255, 0.2);
    }
    .cke_inner {
      background: #270140;
    }
    .dark .cke_inner {
      background: #270140;
    }
    .cke_editable {
      color: #FFFFFF;
      font-family: 'Press Start 2P', sans-serif;
      font-size: 12px;
    }
    .dark .cke_editable {
      color: #FFFFFF;
    }
    .cke_top {
      background: #012A60;
      border-bottom: 3px solid #270140;
    }
    .dark .cke_top {
      background: #0060C1;
      border-bottom: 3px solid #FFFFFF;
    }

    /* Fondo con imagen y overlay */
    html {
      background: linear-gradient(rgba(39, 1, 64, 0.6), rgba(39, 1, 64, 0.6)), url('https://motionbgs.com/media/3639/super-mario.jpg') no-repeat center center fixed;
      background-size: cover;
      background-color: #270140;
    }
    .dark html {
      background: linear-gradient(rgba(39, 1, 64, 0.6), rgba(39, 1, 64, 0.6)), url('https://motionbgs.com/media/3639/super-mario.jpg') no-repeat center center fixed;
      background-size: cover;
    }
    html, body {
      height: 100%;
      scroll-behavior: smooth;
      transition: background-color 0.5s ease-in-out;
    }

    /* Animación de fade-in */
    @keyframes fade-in {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .animate-fade-in {
      animation: fade-in 0.6s ease-out;
      will-change: opacity, transform;
    }

    /* Estilo de inputs */
    input:focus, textarea:focus, select:focus {
      outline: none;
      box-shadow: 0 0 0 3px rgba(1, 42, 96, 0.5);
      transition: box-shadow 0.3s ease;
    }

    /* Fondo semitransparente para el contenido */
    main {
      background-color: rgba(255, 255, 255, 0.8);
    }
    .dark main {
      background-color: rgba(5, 14, 38, 0.8);
    }

    /* Estilos para elementos comunes */
    .blog-card {
      background-color: rgba(245, 245, 245, 0.9);
      border-color: #A0A0A0;
    }
    .dark .blog-card {
      background-color: rgba(5, 14, 38, 0.8);
      border-color: #270140;
    }
    .blog-title {
      color: #1E90FF;
    }
    .dark .blog-title {
      color: #0060C1;
    }
    .blog-text {
      color: #333333;
    }
    .dark .blog-text {
      color: #FFFFFF;
    }
    .blog-image {
      border-color: #A0A0A0;
    }
    .dark .blog-image {
      border-color: #270140;
    }
    .blog-button {
      box-shadow: 4px 4px 0 rgba(0, 0, 0, 0.3);
    }
    .dark .blog-button {
      box-shadow: 4px 4px 0 rgba(0, 0, 0, 0.5);
    }
    .blog-review {
      background-color: rgba(230, 230, 230, 0.9);
    }
    .dark .blog-review {
      background-color: rgba(39, 1, 64, 0.8);
    }
    .blog-comment {
      color: #555555;
    }
    .dark .blog-comment {
      color: #BBBBBB;
    }
    .blog-link {
      color: #1E90FF;
    }
    .dark .blog-link {
      color: #00BFFF;
    }
    .blog-form {
      background-color: rgba(245, 245, 245, 0.9);
    }
    .dark .blog-form {
      background-color: rgba(5, 14, 38, 0.8);
    }
    .blog-label {
      color: #333333;
    }
    .dark .blog-label {
      color: #FFFFFF;
    }
    .blog-input {
      background-color: #FFFFFF;
      border-color: #A0A0A0;
      color: #333333;
    }
    .dark .blog-input {
      background-color: #050E26;
      border-color: #270140;
      color: #FFFFFF;
    }

    /* Barra de navegación */
    nav {
      background-color: rgba(224, 224, 224, 0.9);
    }
    .dark nav {
      background-color: rgba(21, 16, 38, 0.9);
    }
  </style>
</head>
<body id="body" class="flex flex-col min-h-screen text-light-text font-pixel transition-all duration-700 ease-in-out">
  <nav class="bg-light-nav dark:bg-dark-purple-nav shadow-pixel py-2 px-4">
    <div class="max-w-6xl mx-auto flex justify-between items-center">
      <a href="{% url 'blogapp:blog_list' %}">
        <img src="{% static 'images/Krashpx.png' %}" alt="Krash.px Logo" class="h-12 w-auto">
      </a>
      <div class="flex items-center space-x-2">
        <button onclick="toggleDarkMode()" class="flex items-center gap-2 px-2 py-1 rounded-none bg-dark-teal text-light-text hover:bg-neon-pink transition-all duration-300 shadow-pixel text-sm">
          <span id="theme-icon" class="transition-transform duration-500 transform">🎮</span>
          <span id="theme-label" class="transition-opacity duration-500 ease-in-out">Modo Claro</span>
        </button>
        {% if user.is_authenticated %}
          <a href="{% url 'blogapp:add_blog' %}" class="bg-dark-teal hover:bg-neon-pink text-light-text font-medium py-1 px-2 rounded-none transition-all duration-500 ease-in-out shadow-pixel text-sm">New Blog</a>
        {% endif %}
      </div>
    </div>
  </nav>
  <main class="flex-grow w-full transition-all duration-700 ease-in-out">
    <div class="max-w-4xl mx-auto px-4 py-8">
      {% block content %}{% endblock %}
    </div>
  </main>

  <script>
    // Persist dark mode setting
    document.addEventListener('DOMContentLoaded', () => {
      const prefersDark = localStorage.getItem('theme') === 'dark';
      const body = document.getElementById('body');
      const icon = document.getElementById('theme-icon');
      if (prefersDark) {
        body.classList.add('dark');
        if (icon) icon.textContent = '🕹️';
        const label = document.getElementById('theme-label');
        if (label) label.textContent = 'Modo Oscuro';
      } else {
        if (icon) icon.textContent = '🎮';
        const label = document.getElementById('theme-label');
        if (label) label.textContent = 'Modo Claro';
      }
    });

    function toggleDarkMode() {
      const body = document.getElementById('body');
      const icon = document.getElementById('theme-icon');
      const isDark = body.classList.toggle('dark');
      localStorage.setItem('theme', isDark ? 'dark' : 'light');
      if (icon) {
        icon.classList.add('rotate-180');
        setTimeout(() => {
          icon.textContent = isDark ? '🕹️' : '🎮';
          const label = document.getElementById('theme-label');
          if (label) label.style.opacity = 0;
          setTimeout(() => {
            label.textContent = isDark ? 'Modo Oscuro' : 'Modo Claro';
            label.style.opacity = 1;
          }, 250);
          icon.classList.remove('rotate-180');
        }, 250);
      }
    }
  </script>
</body>
</html>